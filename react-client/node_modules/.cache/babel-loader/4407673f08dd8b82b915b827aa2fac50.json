{"ast":null,"code":"import axios from \"axios\";\nimport { push } from \"react-router-redux\";\nconst URL = \"http://localhost:8080/twister-server\";\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\nexport const SIGNUP = \"SIGNUP\";\nexport function login(username, password) {\n  return function (dispatch) {\n    var params = new URLSearchParams();\n    params.append(\"login\", username);\n    params.append(\"password\", password);\n    var request = {\n      params: params\n    };\n    axios.get(`${URL}/login`, request).then(response => {\n      if (response.data.code === -1) {\n        var d = getListFriends(response.data.Key).then(function (response) {\n          return response.data;\n        }).catch(function (response) {\n          console.log(\"response\");\n        });\n        console.log(d);\n        dispatch(push({\n          pathname: \"/account\",\n          state: {\n            user: response.data\n          }\n        }));\n      }\n    }).catch(error => {\n      alert(\"error\");\n    });\n  };\n}\nexport function signup(name, lastname, email, password, sex, birthdate) {\n  return function (dispatch) {\n    var params = new URLSearchParams();\n    params.append(\"nom\", name);\n    params.append(\"prenom\", lastname);\n    params.append(\"login\", email);\n    params.append(\"password\", password);\n    params.append(\"sex\", sex);\n    params.append(\"birth_date\", birthdate);\n    var request = {\n      params: params\n    };\n    axios.get(`${URL}/createUser`, request).then(response => {\n      if (response.data.code === -1) {\n        dispatch(push(\"/login\"));\n      }\n    }).catch(error => {\n      alert(\"error\");\n    });\n  };\n}\nexport function logout(key) {\n  return function (dispatch) {\n    var params = new URLSearchParams();\n    params.append(\"key\", key);\n    var request = {\n      params: params\n    };\n    axios.get(`${URL}/logout`, request).then(response => {\n      dispatch({\n        type: LOGOUT,\n        payload: response.data\n      });\n\n      if (response.data.code === -1) {\n        dispatch(push({\n          pathname: \"/login\",\n          state: {}\n        }));\n      }\n    }).catch(error => {\n      alert(\"error\");\n    });\n  };\n}\n\nfunction getListFriends(key) {\n  console.log(\"ss\");\n  var params = new URLSearchParams();\n  params.append(\"key\", key);\n  var request = {\n    params: params\n  };\n  return axios.get(`${URL}/listerFriends`, request);\n}\n\nconst apod = axios.create({\n  baseURL: `${URL}/listerFriends`\n});\n\nfunction getAPODpromise(key) {\n  var params = new URLSearchParams();\n  params.append(\"key\", key);\n  var request = {\n    params: params\n  };\n  return apod.get('', request);\n}\n\nconsole.log(getAPODpromise().then(response => {\n  return response.data;\n}).catch(error => {\n  console.log(error);\n}));","map":{"version":3,"sources":["/home/melissa/Desktop/yacine/others/react/twister-client/src/actions/index.js"],"names":["axios","push","URL","LOGIN","LOGOUT","SIGNUP","login","username","password","dispatch","params","URLSearchParams","append","request","get","then","response","data","code","d","getListFriends","Key","catch","console","log","pathname","state","user","error","alert","signup","name","lastname","email","sex","birthdate","logout","key","type","payload","apod","create","baseURL","getAPODpromise"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { push } from \"react-router-redux\";\n\nconst URL = \"http://localhost:8080/twister-server\";\n\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\nexport const SIGNUP = \"SIGNUP\";\n\nexport function login(username, password) {\n  return function (dispatch) {\n    var params = new URLSearchParams();\n    params.append(\"login\", username);\n    params.append(\"password\", password);\n    var request = {\n      params: params,\n    };\n    axios\n      .get(`${URL}/login`, request)\n      .then((response) => {\n        if (response.data.code === -1) {\n          var d = getListFriends(response.data.Key)\n            .then(function (response) {\n              return response.data;\n            })\n            .catch(function (response) {\n              console.log(\"response\");\n            });\n          console.log(d);\n          dispatch(\n            push({ pathname: \"/account\", state: { user: response.data } })\n          );\n        }\n      })\n      .catch((error) => {\n        alert(\"error\");\n      });\n  };\n}\n\nexport function signup(name, lastname, email, password, sex, birthdate) {\n  return function (dispatch) {\n    var params = new URLSearchParams();\n    params.append(\"nom\", name);\n    params.append(\"prenom\", lastname);\n    params.append(\"login\", email);\n    params.append(\"password\", password);\n    params.append(\"sex\", sex);\n    params.append(\"birth_date\", birthdate);\n    var request = {\n      params: params,\n    };\n    axios\n      .get(`${URL}/createUser`, request)\n      .then((response) => {\n        if (response.data.code === -1) {\n          dispatch(push(\"/login\"));\n        }\n      })\n      .catch((error) => {\n        alert(\"error\");\n      });\n  };\n}\n\nexport function logout(key) {\n  return function (dispatch) {\n    var params = new URLSearchParams();\n    params.append(\"key\", key);\n    var request = {\n      params: params,\n    };\n    axios\n      .get(`${URL}/logout`, request)\n      .then((response) => {\n        dispatch({ type: LOGOUT, payload: response.data });\n        if (response.data.code === -1) {\n          dispatch(push({ pathname: \"/login\", state: {} }));\n        }\n      })\n      .catch((error) => {\n        alert(\"error\");\n      });\n  };\n}\n\nfunction getListFriends(key) {\n  console.log(\"ss\")\n  var params = new URLSearchParams();\n  params.append(\"key\", key);\n  var request = {\n    params: params,\n  };\n\n  return axios.get(`${URL}/listerFriends`, request);\n}\n\n\nconst apod = axios.create({\n  baseURL: `${URL}/listerFriends`\n});\n\nfunction getAPODpromise(key) {\n  var params = new URLSearchParams();\n  params.append(\"key\", key);\n  var request = {\n    params: params,\n  };\n  return apod.get('', request)\n}\n\nconsole.log(getAPODpromise().then(response => {\n  return response.data\n}).catch(error => {\n  console.log(error)\n}))\n"]},"metadata":{},"sourceType":"module"}